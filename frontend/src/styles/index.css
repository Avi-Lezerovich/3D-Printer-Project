@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom layers remain for handcrafted tokens/utilities */
@layer reset, base, components, utilities;

@layer reset {
  *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
  html,body,#root{height:100%}
}

@layer base{
  :root{
    /* dark theme (default) */
    --bg:#0b1620; 
    --panel:#0d1d2b; 
    --muted:#7fb6e6; 
    --accent:#00aef0; 
    --accent-2:#004d7f; 
    --good:#37d67a; 
    --warn:#f5a623; 
    --bad:#f44336;
    --text:#e6f1ff;
    --text-soft:#c9e3ff;
    --border:#123a56;
    --focus:#66ccff;
    color-scheme: dark;
  }
  :root[data-theme='light']{
    --bg:#f6fbff; 
    --panel:#ffffff; 
    --muted:#335a77; 
    --accent:#006aa6; 
    --accent-2:#003a5c; 
    --good:#0a7d3b; 
    --warn:#b57000; 
    --bad:#b30000;
    --text:#0b1620;
    --text-soft:#163049;
    --border:#cfe4f5;
    --focus:#007acc;
    color-scheme: light;
  }
  body{
    font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    background:var(--bg);
    color:var(--text);
    line-height:1.6;
    font-feature-settings: 'cv01', 'cv02', 'cv03', 'cv04';
    font-weight: 400;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  h1,h2,h3,h4,h5,h6{color:var(--text-soft); margin-bottom: 0.5em;}
  h1 { font-size: 2.5rem; }
  h2 { font-size: 2rem; }
  h3 { font-size: 1.75rem; }
  h4 { font-size: 1.5rem; }
  h5 { font-size: 1.25rem; }
  h6 { font-size: 1rem; }

  p { margin-bottom: 1em; }

  a{color:var(--accent); text-underline-offset: 2px; text-decoration-thickness: 1px}
  a:hover{color:var(--accent-2); text-decoration-thickness: 2px}
  
  /* Enhanced focus indicators for accessibility */
  :focus-visible{
    outline: 3px solid var(--focus); 
    outline-offset: 2px; 
    border-radius: 6px;
    box-shadow: 0 0 0 1px var(--bg), 0 0 0 4px rgba(102, 204, 255, 0.2);
    transition: outline-color 0.15s ease, box-shadow 0.15s ease;
  }
  
  /* High contrast focus for buttons */
  button:focus-visible, [role="button"]:focus-visible {
    outline: 3px solid var(--focus);
    outline-offset: 2px;
    box-shadow: 0 0 0 1px var(--bg), 0 0 0 5px rgba(102, 204, 255, 0.3);
  }
  
  /* Enhanced selection styling */
  ::selection{background: rgba(0,174,240,0.3); color: var(--text)}

  /* Shared surfaces */
  .panel{background:var(--panel);border:1px solid var(--border);border-radius:12px;padding:16px}
}

@layer components{
  .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 14px;border-radius:10px;border:1px solid var(--border);background:var(--panel);color:var(--text);transition:.2s box-shadow,.2s transform}
  .btn:hover{box-shadow:0 2px 10px rgba(0,0,0,.15)}
  .btn:active{transform:translateY(1px)}
  .btn-primary{background:var(--accent);border-color:var(--accent-2);color:white}
  .btn-danger{background:var(--bad);border-color:#8e1f1f;color:white}
  .btn-warn{background:var(--warn);border-color:#8a5a00;color:black}

  label {
    display: block;
    margin-bottom: 0.5rem;
    color: var(--text-soft);
  }

  input, select, textarea {
    display: block;
    width: 100%;
    padding: 0.75rem;
    border: 1px solid var(--border);
    border-radius: 8px;
    background-color: var(--panel);
    color: var(--text);
    transition: border-color 0.2s;
  }

  input:focus, select:focus, textarea:focus {
    outline: none;
    border-color: var(--accent);
  }

  button:disabled{cursor:not-allowed; opacity: 0.7;}

  /* Loading states and skeleton loaders */
  .loading-skeleton {
    background: linear-gradient(90deg, 
      rgba(148, 163, 184, 0.1) 25%, 
      rgba(148, 163, 184, 0.2) 50%, 
      rgba(148, 163, 184, 0.1) 75%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s ease-in-out infinite;
    border-radius: 8px;
    position: relative;
    overflow: hidden;
  }

  @keyframes shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
  }

  .loading-spinner {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 2px solid rgba(148, 163, 184, 0.3);
    border-radius: 50%;
    border-top-color: var(--accent);
    animation: spin 1s ease-in-out infinite;
  }

  @keyframes spin {
    to { transform: rotate(360deg); }
  }

  .loading-dots {
    display: inline-flex;
    gap: 4px;
  }

  .loading-dots span {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: var(--muted);
    animation: bounce 1.4s ease-in-out infinite both;
  }

  .loading-dots span:nth-child(1) { animation-delay: -0.32s; }
  .loading-dots span:nth-child(2) { animation-delay: -0.16s; }

  @keyframes bounce {
    0%, 80%, 100% { 
      transform: scale(0.8);
      opacity: 0.5;
    }
    40% { 
      transform: scale(1);
      opacity: 1;
    }
  }
}

@layer utilities{
  .grid{display:grid;gap:16px}
  .grid-2{grid-template-columns:repeat(2,minmax(0,1fr))}
  .grid-3{grid-template-columns:repeat(3,minmax(0,1fr))}
  @media (max-width: 900px){.grid-2,.grid-3{grid-template-columns:1fr}}
  .fluid-img{max-width:100%;height:auto;display:block}
  .visually-hidden{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap}

  .mt-1 { margin-top: 0.25rem; }
  .mt-2 { margin-top: 0.5rem; }
  .mt-3 { margin-top: 1rem; }
  .mt-4 { margin-top: 1.5rem; }
  .mt-5 { margin-top: 3rem; }

  .mb-1 { margin-bottom: 0.25rem; }
  .mb-2 { margin-bottom: 0.5rem; }
  .mb-3 { margin-bottom: 1rem; }
  .mb-4 { margin-bottom: 1.5rem; }
  .mb-5 { margin-bottom: 3rem; }

  .p-1 { padding: 0.25rem; }
  .p-2 { padding: 0.5rem; }
  .p-3 { padding: 1rem; }
  .p-4 { padding: 1.5rem; }
  .p-5 { padding: 3rem; }

  .text-center { text-align: center; }
}
